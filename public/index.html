<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="/assets/css/custom.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@500&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/ed72a65202.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- i18next ライブラリの読み込み -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next/21.6.10/i18next.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next-http-backend/1.3.1/i18nextHttpBackend.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/i18next-browser-languagedetector/6.1.3/i18nextBrowserLanguageDetector.min.js"></script>

    <meta charset="utf-8">
    <style>
        .card {
            animation: fadeIn 1.0s ease 0.0s 1 normal;
            transition: all 0.5s;
        }

        @keyframes fadeIn {

            /*animation-nameで設定した値を書く*/
            0% {
                opacity: 0
            }

            /*アニメーション開始時は不透明度0%*/
            100% {
                opacity: 1
            }

            /*アニメーション終了時は不透明度100%*/
        }

        .transition_all {
            transition: all 0.5s;
        }
    </style>
</head>

<body>
    <div class="container-sm">
        <p><img class="mt-3 mb-1" src="assets/logo_text.png" height="50px"></p>

        <div class="row">
            <div class="col-lg-12 col-xl-6">


                <div class="input-group">
                    <span class="input-group-text" id="name" data-i18n="name">名前</span>
                    <input class="form-control" size="5" type="text" id="text_my_name" data-i18n="[value]anonymous"
                        value="匿名"></input>
                    <span class="input-group-text" id="icon_number_of_joined"><i class="fas fa-user-friends"></i></span>
                    <input class="form-control" size="1" type="text" id="text_number_of_joined"
                        placeholder="Number of connected user" readonly></input>
                    <input type="checkbox" class="btn-check" id="checkbox_deactivate_comment_control" autocomplete="off"
                        disabled>
                    <label class="btn btn-outline-success" for="checkbox_deactivate_comment_control"
                        id="label_comment_control"><i class="bi bi-arrow-repeat"></i></label><br>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-outline-info" data-bs-toggle="modal"
                        data-bs-target="#staticBackdrop">
                        <i class="bi bi-file-text"></i>
                    </button>
                </div>
                <!-- Modal -->
                <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="staticBackdropLabel" data-i18n="usage_title">
                                    使い方
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="alert alert-danger" role="alert" data-i18n="bug_notice">
                                    スマートフォン上にて，音声読み上げボタンを一旦ONにした後，もう一度ボタンを押しても表示が切り替わらないバグがあります．この場合，画面のいずれかをタップすることで表示が更新されます．
                                </div>
                                <h5 data-i18n="emoji_reaction_title">絵文字リアクションボタン</h5>
                                <p data-i18n="emoji_reaction_description">絵文字リアクションには緑と赤の2種類のボタンがあります。
                                    緑色はサイレントリアクションで、絵文字が配信画面に表示されるだけです。赤色はサウンドリアクションで、押すと音がなります。実際にどのような音がなるかは以下の一覧を参考にしてください。
                                </p>
                                <ul>
                                    <li data-i18n="camera_shutter_sound">&#x1f4f8;：カシャ、パシャ（カメラの効果音）</li>
                                    <li data-i18n="clap">👏：パチン（手を一回叩く音）</li>
                                    <li data-i18n="pop">🎉：パーン（クラッカーを鳴らす音）</li>
                                    <li data-i18n="woo-hoo">🥳：ヒュー！（歓声） </li>
                                    <li data-i18n="wow">😮：へ〜</li>
                                    <li data-i18n="wait">🤔：ちょっとまって</li>
                                    <li data-i18n="ok">👌：オーケー </li>
                                    <li data-i18n="pow">👊：バシ！（パンチの音）</li>
                                    <li data-i18n="hahaha">🤣：大笑い</li>
                                    <li data-i18n="hehe">😏：くすくす笑い</li>
                                </ul>

                                <h5 data-i18n="comment_send_title">コメント送信</h5>
                                <p>
                                    <span
                                        data-i18n="comment_send_description_1">配信者の画面に任意のテキストを表示することができます。ボタン横のドロップダウンメニューを開くとテキストの色や輪郭色、音声読み上げ機能</span>（<i
                                        class="fas fa-volume-up"></i><span
                                        data-i18n="comment_send_description_2">ボタン）のON/OFFを選択することができます。音声読み上げにチェックが入っていると入力したテキストが配信者側で読み上げられます。</span>
                                </p>

                                <h5><i class="bi bi-terminal"></i> コメントコマンド機能</h5>
                                <p>
                                    コメント入力欄で <code>=</code> で始まる特殊なコマンドを入力することで、配信画面上に様々な表現を追加できます。
                                </p>
                                <div class="card mb-2">
                                    <div class="card-header bg-primary text-white">
                                        <strong>text()</strong> - テキスト表示コマンド
                                    </div>
                                    <div class="card-body">
                                        <p class="small mb-1"><strong>書式:</strong></p>
                                        <code>=text("表示テキスト", X座標, Y座標)</code>

                                        <p class="small mt-2 mb-1"><strong>例:</strong></p>
                                        <ul class="small mb-2">
                                            <li><code>=text("注目!", 0.5, 0.5)</code> → 画面中央に「注目!」を10秒間表示</li>
                                            <li><code>=text("おつかれさま", 0.9, 0.1)</code> → 右上に表示</li>
                                        </ul>
                                        <p class="small text-muted mb-0">
                                            ※ X座標・Y座標は0.0〜1.0で指定（0.5が中央）
                                        </p>
                                    </div>
                                </div>

                                <h5><i class="bi bi-clock-history"></i> コメント履歴機能</h5>
                                <p class="small">
                                    コメント入力欄では、過去に入力したコメントを簡単に呼び出せます:
                                </p>
                                <ul class="small">
                                    <li><kbd>Ctrl</kbd> + <kbd>P</kbd> または <kbd>↑</kbd>: 前の履歴を表示</li>
                                    <li><kbd>Ctrl</kbd> + <kbd>N</kbd> または <kbd>↓</kbd>: 次の履歴を表示</li>
                                </ul>

                                <h5 data-i18n="continuous_comment_send_title">コメントの連投</h5>
                                <p>
                                    <span
                                        data-i18n="continuous_comment_send_description_1">大規模人数におけるコメント荒れを防ぐため、通常はコメントの連続投稿には制約（5秒開けないといけない）があります。しかし</span>
                                    <input type="checkbox" class="btn-check"
                                        id="dummy_checkbox_deactivate_comment_control" autocomplete="off" value=true
                                        disabled checked>
                                    <label class="btn btn-outline-success"
                                        for="dummy_checkbox_deactivate_comment_control"
                                        id="dummy_label_comment_control"><i class="bi bi-arrow-repeat"></i></label>

                                    <span
                                        data-i18n="continuous_comment_send_description_2">このように緑色で点灯しているときはコメントの連投が可能です。</span>
                                </p>

                                <h5 data-i18n="inappropriate_words_filter_title">不適切な表現のフィルター</h5>
                                <p>
                                    <span
                                        data-i18n="inappropriate_words_filter_description">安全で快適な配信環境を保つため、コメントや名前に不適切な表現が含まれている場合、自動的に伏せ字（例：****）に置き換えられます。この処理は送信時に自動で行われ、すべての視聴者に適用されます。</span>
                                </p>

                                <!-- <h5>はがき送信</h5>
                            <p>
                                配信者のみにメッセージを送信する場合に利用し、配信者画面には共有表示されません。ラジオ番組におけるはがきを送る、といったイベントに活用できるかベータテスト中の機能です。
                            </p> -->

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>


                <div class="row justify-content-center">
                    <div class="col-12">
                        <button class="comment green" id="button_emoji_reaction_01">👍</button>
                        <button class="comment green" id="button_emoji_reaction_02">🙏</button>
                        <button class="comment green" id="button_emoji_reaction_03">🙋</button>
                        <button class="comment green" id="button_emoji_reaction_04">🥺</button>
                        <button class="comment green" id="button_emoji_reaction_05">🤫</button>
                        <button class="comment red" id="button_sound_reaction_00" value="0">&#x1f4f8;</button>
                        <button class="comment red" id="button_sound_reaction_01" value="1"
                            title="パチン（手を叩く音）">👏</button>
                        <button class="comment red" id="button_sound_reaction_02" value="2"
                            title="パーン（クラッカーの音）">🎉</button>
                        <button class="comment red" id="button_sound_reaction_03" value="3" title="大歓声">🥳</button>
                        <button class="comment red" id="button_sound_reaction_04" value="4" title="へぇ〜">😮</button>
                        <button class="comment red" id="button_sound_reaction_05" value="5" title="ちょっとまって">🤔</button>
                        <button class="comment red" id="button_sound_reaction_06" value="6" title="OK">👌</button>
                        <button class="comment red" id="button_sound_reaction_07" value="7" title="パンチ音">👊</button>
                        <button class="comment red" id="button_sound_reaction_08" value="8" title="大笑い">🤣</button>
                        <button class="comment red" id="button_sound_reaction_09" value="9" title="w">😏</button>
                    </div>
                </div>

                <hr>




                <div class="input-group mb-3">

                    <ul class="dropdown-menu p-2 pe-2" style="min-width: 240px;">
                        <!-- テキスト色 -->
                        <li class="mb-2">
                            <div class="d-flex align-items-center justify-content-between">
                                <label for="color_text" class="form-label mb-0 me-2 small">Text Color</label>
                                <input type="color" id="color_text" value="#EEEEEE"
                                    class="form-control form-control-color" style="width: 50px; height: 32px;">
                            </div>
                        </li>

                        <!-- アウトライン色 -->
                        <li class="mb-2">
                            <div class="d-flex align-items-center justify-content-between">
                                <label for="color_text_stroke" class="form-label mb-0 me-2 small">Outline Color</label>
                                <input type="color" id="color_text_stroke" value="#111111"
                                    class="form-control form-control-color" style="width: 50px; height: 32px;">
                            </div>
                        </li>

                        <!-- フォントサイズ -->
                        <li class="mb-2">
                            <div class="d-flex align-items-center justify-content-between">
                                <label for="select_font_size" class="form-label mb-0 me-2 small">Font Size</label>
                                <select id="select_font_size" class="form-select form-select-sm" style="width: 90px;">
                                    <option value="small">小</option>
                                    <option value="medium" selected>中</option>
                                    <option value="large">大</option>
                                </select>
                            </div>
                        </li>

                        <!-- 文字移動方向 -->
                        <li>
                            <div class="d-flex align-items-center justify-content-between">
                                <label for="select_text_direction" class="form-label mb-0 me-2 small"
                                    data-i18n="text_movement_direction">文字移動方向</label>
                                <select id="select_text_direction" class="form-select form-select-sm"
                                    style="width: 90px;">
                                    <option value="still" selected data-i18n="stop">静止</option>
                                    <option value="up">↑</option>
                                    <option value="down">↓</option>
                                    <option value="left">←</option>
                                    <option value="right">→</option>
                                </select>
                            </div>
                        </li>
                    </ul>

                    <textarea style="resize:none" rows="1" type="text" class="form-control"
                        data-i18n="[placeholder]comment_placeholder" placeholder="コメント（最大80字）"
                        id="text_comment"></textarea>


                    <input type="checkbox" class="btn-check" id="checkbox_speech" autocomplete="off" value=true>
                    <label class="btn btn-outline-danger" for="checkbox_speech"><i id="icon_speech"
                            class="fas fa-volume-mute"></i>
                    </label>
                    <button id="button_send" class="btn btn-outline-primary" data-i18n="button_send"><i
                            class="bi bi-send"></i>
                        送信</button>
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="visually-hidden">Toggle Dropdown</span>
                    </button>
                </div>

                <div class="d-grid gap-2 d-flex justify-content-end position-relative mb-3">
                    <div class="position-absolute top-0 end-0 m-2" style="z-index: 10;">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="checkbox_emoji_filter" checked>
                            <label class="form-check-label small" for="checkbox_emoji_filter">
                                emoji filter
                            </label>
                        </div>
                    </div>
                    <textarea id="textarea_comment_history" readonly class="form-control" rows="4"
                        placeholder="Comment History"></textarea>
                    <button type="button"
                        class="me-2 mb-2 btn btn-sm btn-outline-secondary position-absolute bottom-0 rounded-pill"
                        id="download_all_comments" style="right: 40px;">
                        <i class="bi bi-download"></i>
                    </button>
                    <button type="button"
                        class="me-2 mb-2 btn btn-sm btn-outline-primary position-absolute bottom-0 end-0 rounded-pill"
                        id="sync_comments" title="Sync comments from server">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>


            </div>
            <div class="col-lg-12 col-xl-6">

                <!-- ランキング表示エリア -->
                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header bg-primary d-flex justify-content-between align-items-center">
                                <span>
                                    <i class="bi bi-trophy-fill"></i> <span data-i18n="emoji_ranking_title">絵文字部門 Top
                                        10</span>
                                </span>
                                <small class="badge bg-light text-dark">
                                    <i class="bi bi-hash"></i> <span id="total_emoji_count">0</span>
                                </small>
                            </div>
                            <div class="card-body p-2">
                                <div id="emoji_ranking" class="small">
                                    <p class="text-muted" data-i18n="no_data_yet">まだデータがありません</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header bg-success d-flex justify-content-between align-items-center">
                                <span>
                                    <i class="bi bi-chat-dots-fill"></i> <span data-i18n="comment_ranking_title">コメント部門
                                        Top
                                        10</span>
                                </span>
                                <small class="badge bg-light text-dark">
                                    <i class="bi bi-hash"></i> <span id="total_comment_count">0</span>
                                </small>
                            </div>
                            <div class="card-body p-2">
                                <div id="comment_ranking" class="small">
                                    <p class="text-muted" data-i18n="no_data_yet">まだデータがありません</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- <div class="alert alert-light alert-dismissible fade show" role="alert">
                    <li data-i18n="note_1">
                        PCで画面を横に伸ばすと2行に並べて表示できます
                    </li>
                    <li data-i18n="note_2">
                        コードや長文が送られるとこの下に表示されます
                    </li>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div> -->
                <div id="code_share"></div>

            </div>
        </div>


        <hr>

        <footer class="page-footer font-small">
            <div class="footer-copyright small text-center">
                Commentable v<span id="version"></span><br>
                &copy; 2025 <a href="https://tetsuakibaba.jp">Tetsuaki Baba</a> <a
                    href="https://github.com/TetsuakiBaba/commentable"><i class="bi bi-github"></i></a>
            </div>
        </footer>



    </div>


    <!-- p5 依存除去済み -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="utils.js"></script>
    <script src="comment_app.js"></script>
    <script src="sketch.js"></script>
    <script src="clipboard.min.js"></script>
    <!-- 新しい外部 i18n 設定ファイルの読み込み -->
    <script src="i18n-config.js"></script>

</body>

</html>